<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Play the classic 2048 game online">
    <title>2048 Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="game-container">
        <header>
            <h1>2048 Game</h1>
            <button id="dark-mode-toggle" aria-label="Toggle dark mode">ğŸŒ™ Dark Mode</button>
        </header>
        
        <div id="score-container">
            <div id="score">
                <h2>Score: <span id="score-value">0</span></h2>
            </div>
            <div id="best-score">
                <h2>Best: <span id="best-score-value">0</span></h2>
            </div>
        </div>
        
        <div id="board" role="grid" aria-label="2048 game board"></div>
        
        <div id="controls">
            <button id="restart" aria-label="Restart game">ğŸ”„ Restart</button>
            <button id="help" aria-label="View game instructions">â“ Help</button>
        </div>

        <div id="instructions" class="modal" hidden>
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>How to Play 2048</h3>
                <p><strong>Objective:</strong> Combine tiles with the same number to create a tile with the number 2048!</p>
                <h4>Controls:</h4>
                <ul>
                    <li><strong>Arrow Keys:</strong> Move tiles up, down, left, or right</li>
                    <li><strong>Mobile:</strong> Swipe in any direction</li>
                </ul>
                <h4>Rules:</h4>
                <ul>
                    <li>When two tiles with the same number touch, they merge into one</li>
                    <li>Each turn, a new tile appears (usually a 2, sometimes a 4)</li>
                    <li>When you can't move anymore, the game is over</li>
                    <li>Try to reach 2048!</li>
                </ul>
            </div>
        </div>

        <div id="game-over-modal" class="modal" hidden>
            <div class="modal-content">
                <h3>Game Over!</h3>
                <p>Your Score: <span id="final-score">0</span></p>
                <button id="play-again">Play Again</button>
            </div>
        </div>

        <div id="win-modal" class="modal" hidden>
            <div class="modal-content">
                <h3>ğŸ‰ You Won! ğŸ‰</h3>
                <p>You reached 2048! Your Score: <span id="win-score">0</span></p>
                <button id="continue-playing">Continue Playing</button>
            </div>
        </div>
    </div>
    
    <script src="game.js"></script>
    <script>
        // Dark mode toggle
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const isDarkMode = localStorage.getItem('darkMode') === 'true';
        
        if (isDarkMode) {
            document.body.classList.add('dark-mode');
        }
        
        darkModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        });

        // Help modal
        const helpBtn = document.getElementById('help');
        const instructionsModal = document.getElementById('instructions');
        const closeBtn = document.querySelector('.close');

        helpBtn.addEventListener('click', () => {
            instructionsModal.removeAttribute('hidden');
        });

        closeBtn.addEventListener('click', () => {
            instructionsModal.setAttribute('hidden', '');
        });

        window.addEventListener('click', (event) => {
            if (event.target === instructionsModal) {
                instructionsModal.setAttribute('hidden', '');
            }
        });

        if (!window.gameLoaded) {
            console.error('Game failed to load. Please refresh the page.');
        }
    </script>
</body>
</html>